identity:
  name: "adbpgDocParser"
  author: "aliyun-adbpg"
  label:
    en_US: "adbpgDocParser"
    zh_Hans: "文档解析"
description:
  human:
    en_US: "Parse document into chunks using Alibaba Cloud AnalyticDB for PostgreSQL without storing"
    zh_Hans: "使用阿里云AnalyticDB for PostgreSQL解析文档为分块，不存储数据"
  llm: "A tool to parse document into chunks using Alibaba Cloud AnalyticDB for PostgreSQL without storing"
parameters:
  - name: filename
    type: string
    required: true
    label:
      en_US: FileName
      zh_Hans: FileName
    human_description:
      en_US: "The name of the file to parse"
      zh_Hans: "要解析的文件名称"
    llm_description: "The name of the file to parse"
    form: llm
  - name: fileurl
    type: string
    required: true
    label:
      en_US: FileUrl
      zh_Hans: FileUrl
    human_description:
      en_US: "The URL or local path of the file to parse"
      zh_Hans: "要解析的文件URL或本地路径"
    llm_description: "The URL or local path of the file to parse"
    form: llm
  - name: chunksize
    type: number
    required: false
    label:
      en_US: ChunkSize
      zh_Hans: ChunkSize
    human_description:
      en_US: "The size of each chunk for text splitting"
      zh_Hans: "文本切分的块大小"
    llm_description: "The size of each chunk for text splitting"
    form: llm
  - name: document_loader_name
    type: select
    required: false
    label:
      en_US: DocumentLoaderName
      zh_Hans: DocumentLoaderName
    human_description:
      en_US: "The document loader to use for parsing files"
      zh_Hans: "用于解析文件的文档加载器"
    llm_description: "The document loader to use for parsing files"
    form: form
    options:
      - value: ""
        label:
          en_US: "Auto"
          zh_Hans: "Auto"
      - value: "ADBPGLoader"
        label:
          en_US: "ADBPGLoader (Paid, first 3000 pages free)"
          zh_Hans: "ADBPGLoader (收费，前3000页免费)"
      - value: "UnstructuredHTMLLoader"
        label:
          en_US: "UnstructuredHTMLLoader (.html)"
          zh_Hans: "UnstructuredHTMLLoader (.html)"
      - value: "UnstructuredMarkdownLoader"
        label:
          en_US: "UnstructuredMarkdownLoader (.md)"
          zh_Hans: "UnstructuredMarkdownLoader (.md)"
      - value: "PyMuPDFLoader"
        label:
          en_US: "PyMuPDFLoader (.pdf)"
          zh_Hans: "PyMuPDFLoader (.pdf)"
      - value: "PyPDFLoader"
        label:
          en_US: "PyPDFLoader (.pdf)"
          zh_Hans: "PyPDFLoader (.pdf)"
      - value: "RapidOCRPDFLoader"
        label:
          en_US: "RapidOCRPDFLoader (.pdf)"
          zh_Hans: "RapidOCRPDFLoader (.pdf)"
      - value: "PDFWithImageRefLoader"
        label:
          en_US: "PDFWithImageRefLoader (.pdf with image)"
          zh_Hans: "PDFWithImageRefLoader (.pdf 图文关联)"
      - value: "JSONLoader"
        label:
          en_US: "JSONLoader (.json)"
          zh_Hans: "JSONLoader (.json)"
      - value: "CSVLoader"
        label:
          en_US: "CSVLoader (.csv)"
          zh_Hans: "CSVLoader (.csv)"
      - value: "RapidOCRLoader"
        label:
          en_US: "RapidOCRLoader (.png/.jpg/.jpeg/.bmp)"
          zh_Hans: "RapidOCRLoader (.png/.jpg/.jpeg/.bmp)"
      - value: "UnstructuredFileLoader"
        label:
          en_US: "UnstructuredFileLoader (.eml/.msg/.rst/.txt/.docx/.epub/.odt/.pptx/.tsv)"
          zh_Hans: "UnstructuredFileLoader (.eml/.msg/.rst/.txt/.docx/.epub/.odt/.pptx/.tsv)"
    default: ""
  - name: chunk_overlap
    type: number
    required: false
    label:
      en_US: ChunkOverlap
      zh_Hans: ChunkOverlap
    human_description:
      en_US: "The overlap size between chunks"
      zh_Hans: "块之间的重叠大小"
    llm_description: "The overlap size between chunks"
    form: form
  - name: separators
    type: string
    required: false
    label:
      en_US: Separators
      zh_Hans: Separators
    human_description:
      en_US: "JSON array of separators for text splitting. Example: [\"\\n\\n\", \"\\n\", \" \"]"
      zh_Hans: "文本切分的分隔符列表，JSON数组格式。示例：[\"\\n\\n\", \"\\n\", \" \"]"
    llm_description: "JSON array of separators for text splitting"
    form: form
  - name: zh_title_enhance
    type: boolean
    required: false
    label:
      en_US: ZhTitleEnhance
      zh_Hans: ZhTitleEnhance
    human_description:
      en_US: "Whether to enhance Chinese title recognition"
      zh_Hans: "是否增强中文标题识别"
    llm_description: "Whether to enhance Chinese title recognition"
    form: form
  - name: text_splitter_name
    type: select
    required: false
    label:
      en_US: TextSplitterName
      zh_Hans: TextSplitterName
    human_description:
      en_US: "The text splitter algorithm to use"
      zh_Hans: "使用的文本切分算法"
    llm_description: "The text splitter algorithm to use"
    form: form
    options:
      - value: ""
        label:
          en_US: "Auto"
          zh_Hans: "Auto"
      - value: "LLMSplitter"
        label:
          en_US: "LLMSplitter (LLM-based, ADBPGLoader only)"
          zh_Hans: "LLMSplitter (LLM切分，仅ADBPGLoader可用)"
      - value: "ChineseRecursiveTextSplitter"
        label:
          en_US: "ChineseRecursiveTextSplitter (Chinese optimized)"
          zh_Hans: "ChineseRecursiveTextSplitter (中文优化)"
      - value: "RecursiveCharacterTextSplitter"
        label:
          en_US: "RecursiveCharacterTextSplitter (Multi-language code)"
          zh_Hans: "RecursiveCharacterTextSplitter (多语言代码)"
      - value: "SpacyTextSplitter"
        label:
          en_US: "SpacyTextSplitter (Better segmentation)"
          zh_Hans: "SpacyTextSplitter (更好的分割效果)"
      - value: "MarkdownHeaderTextSplitter"
        label:
          en_US: "MarkdownHeaderTextSplitter (Markdown)"
          zh_Hans: "MarkdownHeaderTextSplitter (Markdown文档)"
    default: ""
  - name: vl_enhance
    type: boolean
    required: false
    label:
      en_US: VlEnhance
      zh_Hans: VlEnhance
    human_description:
      en_US: "Whether to enable vision-language enhancement"
      zh_Hans: "是否启用视觉语言增强"
    llm_description: "Whether to enable vision-language enhancement"
    form: form
  - name: splitter_model
    type: select
    required: false
    label:
      en_US: SplitterModel
      zh_Hans: SplitterModel
    human_description:
      en_US: "The LLM model for LLMSplitter"
      zh_Hans: "LLMSplitter使用的大语言模型"
    llm_description: "The LLM model for LLMSplitter"
    form: form
    options:
      - value: ""
        label:
          en_US: "Auto"
          zh_Hans: "Auto"
      - value: "qwq-plus"
        label:
          en_US: "qwq-plus"
          zh_Hans: "qwq-plus"
      - value: "qwen-max"
        label:
          en_US: "qwen-max"
          zh_Hans: "qwen-max"
      - value: "qwen-plus"
        label:
          en_US: "qwen-plus"
          zh_Hans: "qwen-plus"
      - value: "qwen-turbo"
        label:
          en_US: "qwen-turbo"
          zh_Hans: "qwen-turbo"
    default: ""
output_schema:
  type: object
  properties:
    result:
      $ref: "https://dify.ai/schemas/v1/general_structure.json"
extra:
  python:
    source: tools/adbpg_doc_parser/adbpg_doc_parser.py

